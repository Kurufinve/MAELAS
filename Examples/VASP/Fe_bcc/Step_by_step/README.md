-------------------------------------
EXAMPLE: Fe bcc (step by step)
-------------------------------------

In this folder you can find an example on how to use MAELAS code performing each step manually.

------------------------
Step1: cell relaxation
------------------------

In folder Step1_cell_relaxation, we show an example of cell relaxation for
Fe bcc. Firstly, we copy the file POSCAR_Fe_bcc in this folder.
Next, we type:
```bash
maelas -r -i POSCAR_Fe_bcc -k 60 > output.dat
```
It should generate the files: POSCAR, KPOINTS,INCAR, vasp_jsub_rlx and output.dat. 
Next, one should paste the POTCAR in this folder and run the VASP calculation by typing
```bash
qsub vasp_jsub_rlx
```
Note that the user might need to modify vasp_jsub_rlx depending on the cluster or local computer queuing system.


------------------------
Step2: test MAE
------------------------

In folder Step2_test_MAE you can find an example about the test of MAE. We copy the relaxed POSCAR (called POSCAR_Fe_bcc_rlx) 
in this folder. Then we type:
```bash
maelas -m -i POSCAR_Fe_bcc_rlx -k 60 -s1 1 0 0 -s2 1 0 1 > output.dat
```
It should generate the following files: POSCAR_0_0, INCAR_std, 
INCAR_0_C (C=1,2), KPOINTS, vasp_mae_0, vasp_mae_jsub, vasp_mae, vasp_mae_cp_oszicar 
and output.dat. 
Next, one should paste the POTCAR in this folder and run the VASP calculation by typing
```bash
./vasp_mae
```
Note that the user might need to modify vasp_mae_jsub depending on the cluster or local computer queuing system. 
After, the calcualtion is finished you can get the OSZICAR files with the calculated energies for both spin directions (s1 and s2) 
using the following command
```bash
./vasp_mae_cp_oszicar 
```
It will generate the files OSZICAR_0_0_1 and OSZICAR_0_0_2 that contain the total energy of spin direction s1 and s2, respectively.


----------------------------------
Step3: generation VASP input files
----------------------------------

In folder Step3_generation_VASP_input_files you can find an example about the
generation of VASP input files to calculate the magnetostrictive coefficients.
We copy the relaxed POSCAR (called POSCAR_Fe_bcc_rlx) in this folder.
Then we type:
```bash
maelas -g -i POSCAR_Fe_bcc_rlx -k 60 -s 0.01 -n 7 > output.dat
```
It should generate the following files: POSCAR_A_B (A=1,2, B=1,..,7), INCAR_std, 
INCAR_A_C (A=1,2, C=1,2), KPOINTS, vasp_0, vasp_jsub, vasp_maelas, vasp_cp_oszicar 
and output.dat.  


----------------------------------
Step4: run VASP calculations
----------------------------------

Next, one should paste the POTCAR in the folder Step3_generation_VASP_input_files and run the VASP calculation by typing
```bash
./vasp_maelas
```
As in the previous steps, the user might need to modify vasp_jsub depending on the cluster or local computer queuing system.


----------------------------------
Step5a: derivation magnetostrictive coefficients
----------------------------------

In the folder Step5a_derivation_magnetostriction_coefficients we show an example on how 
to calculate the magnetostrictive coefficients from the energies written in the OSZICAR files from Step4.
Firstly, we copy the files vasp_cp_oszicar, POSCAR_Fe_bcc_rlx and POSCAR_A_B (A=1,2, B=1,..,7) from
folder Step3_generation_VASP_input_files into folder Step5a_derivation_magnetostriction_coefficients. 
Next, we generate the required OSZICAR_A_B_C files by writing the following command
```bash
./vasp_cp_oszicar
```
Finally, we derive the magnetostrictive coefficients running MAELAS 
```bash
maelas -d -i POSCAR_Fe_bcc_rlx -n 7 > output.dat
```
It should generate the files: dE_A.png, ene_A_C.dat, fit_ene_A_C.png and output.dat. 
In the file output.dat you can find the calculated magnetostrictive coefficients.


----------------------------------
Step5b: derivation magnetoelastic constants
----------------------------------

Similarly, in folder Step5b_derivation_magnetoelastic_constants you can see an example about
the calculation of magnetoelastic constants. 
Firstly, we copy the files vasp_cp_oszicar, POSCAR_Fe_bcc_rlx and POSCAR_A_B (A=1,2, B=1,..,7) from
folder Step3_generation_VASP_input_files into folder Step5b_derivation_magnetoelastic_constants.
Here, you also need to paste the file that contains the elastic tensor with the same format and units (GPa) 
as generated by AELAS code. We called this file "ELADAT" as in the AELAS code. Next, we type:
```bash
maelas -d -i POSCAR_Fe_bcc_rlx -n 7 -b -e ELADAT > output.dat
```
It should generate the files: dE_A.png, ene_A_C.dat, fit_ene_A_C.png and output.dat.
In the file output.dat you can find both the calculated magnetostrictive coefficients and 
magnetoelastic constants.
