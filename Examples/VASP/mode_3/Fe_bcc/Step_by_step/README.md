---------------------------------------
EXAMPLE: Fe bcc (step by step) -mode 3
---------------------------------------

In this folder you can find an example on how to use MAELAS code with mode 3 by performing each step manually.

------------------------
Step1: cell relaxation
------------------------

In folder Step1_cell_relaxation, we show an example of cell relaxation for
Fe bcc. Firstly, we copy the file POSCAR_Fe_bcc in this folder.
Next, we type:
```bash
maelas -r -i POSCAR_Fe_bcc -k 60 > output.dat
```
It should generate the files: POSCAR, KPOINTS,INCAR, vasp_jsub_rlx and output.dat. 
Next, one should paste the POTCAR in this folder and run the VASP calculation by typing
```bash
qsub vasp_jsub_rlx
```
Note that the user might need to modify vasp_jsub_rlx depending on the cluster or local computer queuing system.


------------------------
Step2: test MAE
------------------------

Mode 3 does not require to evaluate MAE since it does not include SOC


-------------------------------------------
Step3: generation VASP input files (-mode 3)
-------------------------------------------

In folder Step3_generation_VASP_input_files you can find an example about the
generation of VASP input files to calculate the isotropic magnetoelastic constants.
We copy the relaxed POSCAR (called POSCAR_Fe_bcc_rlx) in this folder.
Then we type:
```bash
maelas -g -mode 3 -i POSCAR_Fe_bcc_rlx -k 60 -s 0.01 -n 7 > output.dat
```
It should generate the following files: POSCAR_A_B (A=1,2, B=1,..,7), INCAR_std, KPOINTS, vasp_0, vasp_jsub, vasp_maelas, vasp_cp_oszicar and output.dat.  


----------------------------------
Step4: run VASP calculations
----------------------------------

Next, one should paste the POTCAR in the folder Step3_generation_VASP_input_files and run the VASP calculation by typing
```bash
./vasp_maelas
```
As in the previous steps, the user might need to modify vasp_jsub depending on the cluster or local computer queuing system.


----------------------------------------------------------
Step5a: derivation isotropic magnetoelastic constants (-mode 3)
----------------------------------------------------------

In the folder Step5a_derivation_magnetoelastic_constants we show an example on how 
to calculate the isotropic magnetoelastic constants from the energies written in the OSZICAR files from Step4.
Firstly, we copy the files vasp_cp_oszicar, POSCAR_Fe_bcc_rlx and POSCAR_A_B (A=1,2, B=1,..,7) from
folder Step3_generation_VASP_input_files into folder Step5a_derivation_magnetostriction_coefficients. 
Next, we generate the required OSZICAR_A_B_C files by writing the following command
```bash
./vasp_cp_oszicar
```
Finally, we derive the magnetoelastic constants running MAELAS 
```bash
maelas -d -mode 3 -i POSCAR_Fe_bcc_rlx -n 7 -s 0.01 > output.dat
```
It should generate the files: fit_ene_A_C.png, ene_A_C.dat and output.dat. 
In the file output.dat you can find the calculated isotropic magnetoelastic constants within the method -mode 3.


-----------------------------------------------------------
Step5b: derivation istropic magnetostrictive coefficients (-mode 3)
-----------------------------------------------------------

Similarly, in folder Step5b_derivation_magnetostrictive_coefficients you can see an example about
the calculation of isotropic magnetostrictive coefficients. 
Firstly, we copy the files vasp_cp_oszicar, POSCAR_Fe_bcc_rlx and POSCAR_A_B (A=1,2, B=1,..,7) from
folder Step3_generation_VASP_input_files into folder Step5b_derivation_magnetostrictive_coefficients.
Here, you also need to paste the file that contains the elastic tensor with the same format and units (GPa) 
as generated by AELAS code. We called this file "ELADAT" as in the AELAS code. Next, we type:
```bash
maelas -d -mode 3 -i POSCAR_Fe_bcc_rlx -n 7 -s 0.01 -b -e ELADAT > output.dat
```
It should generate the files: fit_ene_A_C.png, ene_A_C.dat and output.dat.
In the file output.dat you can find the calculated isotropic magnetostrictive coefficients, isotropic 
magnetoelastic constants and spontaneous volume magnetostriction.
